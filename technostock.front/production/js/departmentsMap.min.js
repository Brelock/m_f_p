"use strict";var deptsMap=null;deptsMap=function(){var e={},n=document.getElementById("departmentsMap"),t=n.dataset,o={lat:Number(t.lat),lng:Number(t.lng)},r=null,a=[{lat:47.857599,lng:35.104645,title:"hey",description:"hey",address_ru:"г. Запорожье, пр. Соборный,179",phone:"(067) 617-41-42",time:"Пн-Вс, 8:00-20:00",more:"Подробнее...",image:"img/tovar1.jpg",number:"№55"},{lat:47.858599,lng:35.124645,title:"fifafo",description:"fifafo",address_ru:"г. Запорожье, пр. Соборный,179",phone:"(067) 617-41-42",time:"Пн-Вс, 8:00-20:00",more:"Подробнее...",image:"img/tovar2.jpg",number:"№143"},{lat:48.857599,lng:34.104645,title:"elo",description:"ole",address_ru:"г. Запорожье, пр. Соборный,179",phone:"(067) 617-41-42",time:"Пн-Вс, 8:00-20:00",more:"Подробнее...",image:"img/tovar1.jpg",number:"№245"},{lat:49.857599,lng:36.104645,title:"raz",description:"raz",address_ru:"г. Запорожье, пр. Соборный,179",phone:"(067) 617-41-42",time:"Пн-Вс, 8:00-20:00",more:"Подробнее...",image:"img/tovar2.jpg",number:"№3"}],i=[],s=null;e.settings={markerIconPath:"/img/marker.png",clusterIconPath:"/img/cluster-image.png",mapZoomLvl:7};var l={getParamsFromUrl:function(e,n){var t=e.split("?"),o={pathOnly:t[0]};if(t&&t.length>1)for(var r=t[t.length-1].split("&"),a=0;a<r.length;a++){var i=r[a];/#_=_/.test(i)&&(i=i.replace("#_=_",""));var s=i.split("=");o[s[0]]=s[1]}return o},initMap:function(){r=new google.maps.Map(n,{center:o,zoom:e.settings.mapZoomLvl})},zoomToOffice:function(e){var n=e.lat,t=e.lng,o=e.zoom;r.panTo({lat:Number(n),lng:Number(t)}),r.setZoom(o)},zoom:function(e){r.setZoom(e)},createMarker:function(n){return new google.maps.Marker({position:{lat:Number(n.lat)||0,lng:Number(n.lng)||0},departmentId:n.id,icon:e.settings.markerIconPath})},createInfoWindow:function(e){var n=e.image_path,t=e.city;return new google.maps.InfoWindow({content:'\n                  <div class="tcnstk__image-wrapper">\n                    <img class="tcnstk__image" src="'+n+'">\n                  </div>\n                  <div class="tcnstk__number">\n                    '+cite.handleTranslationResponse("title_",t)+", "+cite.handleTranslationResponse("address_",e)+'\n                  </div>\n                  <div class="tcnstk__location">\n                    '+cite.handleTranslationResponse("title_",t)+", "+cite.handleTranslationResponse("address_",e)+'\n                  </div>\n                  <div class="tcnstk__work-time">'+cite.handleTranslationResponse("work_time_",e)+"</div>\n                  ",width:270})},createHoverInfoWindow:function(e){var n=e.address_ru,t=e.address_uk,o=cite.isRuLang()?n:t;return new google.maps.InfoWindow({content:'<div class="tcnstk__hover-infow">'+o+"</div>"})},openInfoWindow:function(e,n,t){t.close(),n.open(r,e),l.zoomToOffice({lat:e.position.lat(),lng:e.position.lng(),zoom:18}),s=n,$(".tcnstk__image-wrapper").closest(".gm-style-iw").next().show()},addOnClickMarkerListener:function(e,n,t){google.maps.event.addListener(e,"click",function(){for(var o=0;o<i.length;o++)i[o].close();t.close(),n.open(r,e),s=n,$(".tcnstk__image-wrapper").closest(".gm-style-iw").next().show()})},addOnMouseOverMarkerListener:function(e,n){google.maps.event.addListener(e,"mouseover",function(){s||n.open(r,e)})},addOnMouseOutMarkerListener:function(e,n){google.maps.event.addListener(e,"mouseout",function(){n.close()})},addOnCloseInfoWindowListener:function(e){google.maps.event.addListener(e,"closeclick",function(){s=null})},createMarkersForCluster:function(e){var n=e||a,t=l.getParamsFromUrl(window.location.href).storeId;return n.map(function(e,n){var o=l.createMarker(e),r=l.createInfoWindow(e);i.push(r);var a=l.createHoverInfoWindow(e);return l.addOnClickMarkerListener(o,r,a),l.addOnMouseOverMarkerListener(o,a),l.addOnMouseOutMarkerListener(o,a),l.addOnCloseInfoWindowListener(r),t&&t==o.departmentId&&l.openInfoWindow(o,r,a),o})},initCluster:function(n){new MarkerClusterer(r,n,{styles:[{url:e.settings.clusterIconPath,width:35,height:35,textColor:"#fff",textSize:12}]})},decorator:function(){l.initMap(),l.initCluster(l.createMarkersForCluster())}};return l}();